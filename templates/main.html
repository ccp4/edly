<!DOCTYPE html>
 <html lang="en" ng-app="app">

 <head>
     <meta charset="utf-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1">
     <meta name="description" content="Electron diffraction online simulators">
     <meta name="author" content="tarik drevon">
     <title> Electron diffraction Dashboard </title>
     <link rel="shortcut icon" href="/static/favicon.ico" >
     <link rel="stylesheet" href="static/bower_components/bootstrap-css/css/bootstrap.min.css">
     <link href="/static/css/all_gg.css" rel="stylesheet">
     <link href="/static/css/bw_app.css" rel="stylesheet">
     <link href="/static/css/popup.css" rel="stylesheet">
     <link href="/static/css/dropdown.css" rel="stylesheet">
     <link rel="stylesheet" href="/static/bower_components/jquery-ui/themes/base/jquery-ui.css">
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
     <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
     <!-- <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.16/angular.min.js"></script> -->
     <!-- <script src="/static/bower_components/angular/angular.js"></script> -->
     <!-- <script src="/static/bower_components/angular-aria/angular-aria.js"></script> -->
     <!-- <script src="/static/bower_components/angular-touch/angular-touch.js"></script>
     <script src="/static/bower_components/angular-route/angular-route.js"></script> -->
     <script src="/static/bower_components/angular-switch/dist/switch.js"></script>
     <script src="https://cdn.plot.ly/plotly-2.12.1.min.js"></script>
     <script type="text/x-mathjax-config">
       MathJax.Hub.Config({
         tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
       });
     </script>

     <script type="text/javascript" async
      src="/static/bower_components/MathJax/MathJax.js?config=TeX-MML-AM_CHTML">
     </script>
     <!-- <script src="/static/jmol/jsmol/JSmol.min.js"></script>
     <script src="/static/jmol/jsmol/js/Jmol2.js"></script>
     <script > jmolInitialize("/static/jmol/jsmol");</script> -->
     <!-- <script src="/static/js/utils.js"></script> -->

     <script src="/static/js/app.js"></script>
 </head>




 <body>
  <div class="container-fluid mt-3" style="margin:0px;padding-left:0px;background-color:#3c4a66;">

    <!--================================================  -->
    <!--================================================  -->
    <!-- HEADER -->
    <div class="header">
      <div style="font-size:30px;text-align:center;padding-top: 10px;"> Electron diffraction dashboard </div>
      <!-- Menu -->
      <div class="menu">
       <div class="dropdown">
        <button class="dropbtn">Structures</button>
        <div class="dropdown-content">
          <a href="" onclick="dialog_new_structure()">New</a>
          {% for x in structures %}
          <!-- <a href="" ng-repeat="x in structures" ng-click="set_structure(x)">{a x a}</a> -->
            <a href="" onclick="set_structure('{{x}}')">{{ x }}</a>
          {% endfor %}
        </div>
       </div>
       <div class="dropdown">
        <button class="dropbtn">Links</button>
        <div class="dropdown-content">
          <a href="" onclick="open_link('https://www.ccp4.ac.uk/ccp4-ed/projects/dynamical_diffraction/')">Theory</a>
          <a href="" onclick="open_link('https://github.com/ronandrevon/edly/issues')">Bug report</a>
          <a href="" onclick="open_link('https://debloch.readthedocs.io/en/latest/reference/debloch.bloch.Bloch.html')">Documentation</a>
          <a href="" onclick="open_link('http://ccp4serv6.rc-harwell.ac.uk:8010/blochwave/report/report.html')">Tests</a>
        </div>
       </div>
       <div class="dropdown">
        <button class="dropbtn">Help</button>
        <div class="dropdown-content">
          <!-- <a href="" ng-repeat="(tle,gif) in gifs" ng-bind="tle" onclick="dialog_gif(this,tle,gif)" > -->
            <!-- ng-mouseenter="showIt(tle)" ng-mouseleave="hideIt(tle)" > -->
          <a href="" onclick="open_link('/static/vids/intro.mp4')" > Intro Video </a>
          <div><b> How to : </b></div>
          {% for (tle,gif) in gifs.items() %}
            <a href="" onclick="open_gif_dialog(this,'{{tle}}','{{gif}}')" >
             {{tle}}
            </a>
          {% endfor %}
        </div>
       </div>
      </div><!-- menu -->
    </div><!-- header -->

    <!-- Open dialog to show GIFS -->
    <div id="dialog-gif" title="how to" >
      <!-- <div id="gif"></div> -->
    </div>



    <!--================================================  -->
    <!--================================================  -->
    <!-- PANEL =================================-->
    <div class="row" ng-controller="mainCtrl">
      <div class="col-sm-2" style="padding-left:5px;padding-right:0px;">
        <div class="panel" style="background-color:#b5ccda">

            <div ng-include="'/static/views/structure.html'"></div>

            <!-- solver tabs  -->
            <div class="" ng-hide="modes['molecule']" style="margin: 0px;margin-left: 9px;margin-bottom:-5px;">
              <a class="btn btn-primary popup tab_btn" ng-style="mode_style['frames']" ng-click="set_mode('frames')" ng-mouseenter="showIt('frames')" ng-mouseleave="hideIt('frames')">
                <span class="gg-stack"></span >
                <span class="popuptext" ng-show="popup['frames']"> Frames mode </span>
              </a>
              <a class="btn btn-primary popup tab_btn" ng-style="mode_style['bloch']" ng-click="set_mode('bloch')" ng-mouseenter="showIt('bloch_solver')" ng-mouseleave="hideIt('bloch_solver')">
                <span class="gg-edit-unmask"></span >
                <span class="popuptext" ng-show="popup['bloch_solver']"> Bloch solver </span>
              </a>
              <a class="btn btn-primary popup tab_btn" ng-style="mode_style['ms']" ng-click="set_mode('ms')" ng-mouseenter="showIt('ms_solver')" ng-mouseleave="hideIt('ms_solver')">
                <span class="gg-format-justify" style="margin-top:0"></span >
                <span class="popuptext" ng-show="popup['ms_solver']"> Multislice solver </span>
              </a>
              <a ng-if="dat['felix']" class="btn btn-primary popup tab_btn" ng-click="set_mode('felix')" ng-mouseenter="showIt('felix_tab')" ng-mouseleave="hideIt('felix_tab')" ng-style="mode_style['felix']">
                <span class="gg-components" style="margin-top:0"></span >
                <span class="popuptext" ng-show="popup['felix_tab']"> Felix dynamical refinement </span>
              </a>
            </div>

            <!-- solver panel -->
            <div class="row">
              <div class="col-sm-11 bloch_solver" >
                {a titles[mode] a}
              </div>
            </div>
            <div ng-switch="mode">
              <div ng-switch-when="frames">
                <div ng-include="'static/views/frames_panel.html'"></div>
                <div ng-include="'static/views/upload_panel.html'"></div>
              </div>
              <div ng-switch-when="felix">
                <div ng-controller="FelixPanelCtrl" class="panel bloch_panel" >
                  <div ng-include="'static/views/felix_panel.html'"></div>
                </div>
              </div>
              <div ng-switch-when="bloch">
                <div ng-include="'static/views/frames_panel.html'"></div>
                <div ng-controller="BlochPanelCtrl" class="panel bloch_panel" >
                  <div ng-include="'static/views/bloch_panel.html'"></div>
                </div>
              </div>
            </div><!-- solver panels -->

        </div><!-- Main Panel -->
      </div><!-- col-sm-2 -->

      <!-- solver views  -->
      <div class="col-sm-10" >
        <div ng-switch="mode">
          <div ng-switch-when="frames">
            <div ng-include="'static/views/frame_viewer.html'"></div>
          </div>
          <div ng-switch-when="felix">
            <div ng-controller="FelixCtrl" ng-include="'static/views/felix_viewer.html'"></div>
          </div>
          <div ng-switch-when="bloch">
            <div ng-controller="BlochCtrl" ng-include="'static/views/bloch_viewer.html'"></div>
          </div>
        </div>
      </div><!-- solver views  -->

    </div><!-- main Ctrl row -->


    <!--================================================  -->
    <!--================================================  -->
    <!-- footer  -->
    <footer class="footer">
       Copyright Â© {{year}}, CCP4
       <div>Author : Tarik Drevon</div>
       <div>version : {{version}}</div>
    </footer>

  </div><!-- container -->




  <!--================================================  -->
  <!--================================================  -->
  <!-- new structure form  -->
  <div id="dialog" title="new project">
    <p>Create a new structure?</p>
    <!-- <span class="ui-icon ui-icon-alert" style="float:left; margin:12px 12px 20px 0;"></span> -->
    <form>
      <fieldset>
        <label for="name">Name</label>
        <input type="text" name="name" id="name" value="" class="text ui-widget-content ui-corner-all">
        <div> Please, provide a cif file from : </div>
        <label for="radio-1">builtins</label><input onclick="set_cif()"  type="radio" name="radio-1" id="radio_cif" >
        <label for="radio-2">pdb     </label><input onclick="set_cif()"  type="radio" name="radio-1" id="radio_pdb" checked=true>
        <label for="radio-3">file    </label><input onclick="set_cif()" type="radio" name="radio-1" id="radio_file" >
        <div id="cif_cif">
          <label for="cif"> Name : </label>
          <select name="cif" id="cif">
            {% for s in builtins %}
            <option>{{s}}</option>
            {% endfor %}
          </select>
        </div>
        <div id="cif_pdb">
          <label for="">pdb id : </label>
          <input type="text" name="pdb" id="pdb" value="" class="text ui-widget-content ui-corner-all">
        </div>
        <div id="cif_file">
          <label for="file_cif"> file : </label>
          <input type = "file" class="glyphicon glyphicon-file" name = "file_cif" id="file_cif" onchange="upload_cif()"/>
        </div>

        <!-- Allow form submission with keyboard without duplicating the dialog button -->
        <input type="submit" tabindex="-1" style="position:absolute; top:-1000px">
      </fieldset>
    </form>
    <div id="cif_error" style="color:red;display:none"></div>
  </div>




<script src="/static/js/utils.js"></script>
<!-- <script src="static/bower_components/jquery/dist/jquery.min.js"></script>
<script src="static/bower_components/jquery-ui/jquery-ui.js"></script> -->
<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>
<link rel="stylesheet" href="/static/bower_components/jquery-ui/themes/base/jquery-ui.css">
<!-- <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" /> -->
<script src="/static/js/mainCtrl.js"></script>
<script src="/static/js/felix.js"></script>
<script src="/static/js/bloch.js"></script>
<!-- <script src="/static/js/config.js"></script> -->

<!-- <script src="static/js/jsmol.js"></script> -->

</body>
</html>
